import{a as p,c as j,r as n,j as e,d as m,b as F}from"./index-Bt_c7nVv.js";import{D as g}from"./DogCard-CiFy7fh5.js";const M="_container_62hp7_1",N="_header_62hp7_13",S="_matchButton_62hp7_27",w="_matchSection_62hp7_65",y="_favoritesGrid_62hp7_85",E="_error_62hp7_97",r={container:M,header:N,matchButton:S,matchSection:w,favoritesGrid:y,error:E};function B(){const v=p(),{favorites:a,toggleFavorite:i,resetFavorites:u}=j(),[o,f]=n.useState(null),[c,h]=n.useState(!1),[d,s]=n.useState(""),_=async()=>{if(a.length===0){s("Please select at least one favorite dog");return}h(!0),s("");try{const t=await m.getMatch(a.map(x=>x.id));if(!(t!=null&&t.match))throw new Error("No match found");const l=await m.getDogs([t.match]);if(!l.length)throw new Error("Matched dog not found");f(l[0]),u()}catch(t){console.error("Match generation failed:",t),s("Failed to generate match. Please try again."),v(`${F}/favorites`)}finally{h(!1)}};return e.jsxs("div",{className:r.container,children:[e.jsxs("div",{className:r.header,children:[e.jsxs("h2",{children:["Your Favorites (",a.length,")"]}),e.jsx("button",{className:r.matchButton,onClick:_,disabled:a.length===0||c,children:c?"Finding Match...":"Generate Match"}),d&&e.jsx("div",{className:r.error,children:d})]}),o&&e.jsxs("div",{className:r.matchSection,children:[e.jsx("h3",{children:"Your Perfect Match!"}),e.jsx(g,{dog:o,isFavorited:a.some(t=>t.id===o.id),onToggleFavorite:()=>i(o)})]}),e.jsx("div",{className:r.favoritesGrid,children:a.map(t=>e.jsx(g,{dog:t,isFavorited:!0,onToggleFavorite:()=>i(t)},t.id))})]})}export{B as default};
