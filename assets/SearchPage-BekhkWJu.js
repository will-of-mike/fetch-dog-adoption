import{j as e,a as S,r as c,c as w,d as f}from"./index-Bt_c7nVv.js";import{D as M}from"./DogCard-CiFy7fh5.js";const y="_pagination_u1dtc_1",C="_pageButton_u1dtc_15",P="_active_u1dtc_45",A="_arrowButton_u1dtc_57",g={pagination:y,pageButton:C,active:P,arrowButton:A};function G({currentPage:n,totalItems:p,itemsPerPage:m,onPageChange:a}){const r=Math.ceil(p/m),i=5,x=()=>{const o=[];let d=Math.max(1,n-Math.floor(i/2)),u=d+i-1;u>r&&(u=r,d=Math.max(1,u-i+1));for(let h=d;h<=u;h++)o.push(h);return o};return r<=1?null:e.jsxs("div",{className:g.pagination,children:[e.jsx("button",{onClick:()=>a(n-1),disabled:n===1,className:g.arrowButton,children:"«"}),x().map(o=>e.jsx("button",{onClick:()=>a(o),className:`${g.pageButton} ${n===o?g.active:""}`,children:o},o)),e.jsx("button",{onClick:()=>a(n+1),disabled:n===r,className:g.arrowButton,children:"»"})]})}const I="_container_mbphl_1",E="_filters_mbphl_13",F="_filterGroup_mbphl_29",D="_ageInputs_mbphl_75",R="_loadingSearch_mbphl_101",k="_results_mbphl_137",l={container:I,filters:E,filterGroup:F,ageInputs:D,loadingSearch:R,results:k};function $(){const n=S(),[p,m]=c.useState([]),[a,r]=c.useState({breeds:[],ageMin:0,ageMax:0,sort:"breed:asc",from:0}),[i,x]=c.useState({dogs:[],total:0}),[o,d]=c.useState(!1),{toggleFavorite:u,favorites:h}=w(),[j,_]=c.useState(1),v=25,b=t=>{_(t),r(s=>({...s,from:(t-1)*v}))};c.useEffect(()=>{(async()=>{try{const s=await f.getBreeds();m(s)}catch{throw new Error("Failed to fetch breeds")}})()},[n]),c.useEffect(()=>{B()},[a]);const B=async()=>{d(!0);try{const t=await f.searchDogs(a),s=await f.getDogs(t.resultIds);x({dogs:s,total:t.total})}catch(t){console.error("Search failed:",t)}finally{d(!1)}};return e.jsxs("div",{className:l.container,children:[e.jsx("h3",{children:"Adjust fields for immediate results!"}),e.jsxs("div",{className:l.filters,children:[e.jsxs("div",{className:l.filterGroup,children:[e.jsx("label",{children:"Breeds:"}),e.jsx("select",{multiple:!0,value:a.breeds,onChange:t=>r(s=>({...s,breeds:Array.from(t.target.selectedOptions,N=>N.value)})),children:p.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{className:l.filterGroup,children:[e.jsx("label",{children:"Age Range:"}),e.jsxs("div",{className:l.ageInputs,children:[e.jsx("input",{type:"number",placeholder:"Min",value:a.ageMin,onChange:t=>r(s=>({...s,ageMin:t.target.value}))}),e.jsx("input",{type:"number",placeholder:"Max",value:a.ageMax,onChange:t=>r(s=>({...s,ageMax:t.target.value}))})]})]}),e.jsxs("div",{className:l.filterGroup,children:[e.jsx("label",{children:"Sort By:"}),e.jsxs("select",{value:a.sort,onChange:t=>r(s=>({...s,sort:t.target.value})),children:[e.jsx("option",{value:"breed:asc",children:"Breed (A-Z)"}),e.jsx("option",{value:"breed:desc",children:"Breed (Z-A)"}),e.jsx("option",{value:"age:asc",children:"Age (Low to High)"}),e.jsx("option",{value:"age:desc",children:"Age (High to Low)"})]})]}),o&&e.jsx("p",{className:l.loadingSearch,children:"Herding puppies..."})]}),e.jsx("div",{className:l.results,children:i.dogs.map(t=>e.jsx(M,{dog:t,isFavorited:h.some(s=>s.id===t.id),onToggleFavorite:()=>u(t)},t.id))}),e.jsx("div",{children:i.total>0&&e.jsx(G,{currentPage:j,totalItems:i.total,itemsPerPage:v,onPageChange:b})})]})}export{$ as default};
